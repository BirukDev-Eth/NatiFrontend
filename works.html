<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/iconoir-icons/iconoir@main/css/iconoir.css">
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/css/aos.css">
    <link rel="stylesheet" href="bg/bg_style.css" media="screen and (min-width: 969px)">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <div id='container'></div>
    <h3 id='coords'></h3>

    <main class="main-workspage">

        <!-- Header (kept exactly the same) -->
        <header class="header-area">
            <div class="container">
                <div class="gx-row d-flex align-items-center justify-content-between">
                    <a href="./index.html" class="logo">
                        <img src="./assets/images/LOGO/logo3.png" width="400px" alt="Logo">
                    </a>

                    <nav class="navbar">
                        <ul class="menu">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="about.html">About</a></li>
                            <li class="active"><a href="works.html">Works</a></li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                        <a href="./contact.html" class="theme-btn">Let's talk</a>
                    </nav>

                    <a href="./contact.html" class="theme-btn">Let's talk</a>

                    <div class="show-menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Projects Section -->
        <section class="projects-area">
            <div class="container">
                <h1 class="section-heading" data-aos="fade-up">
                    <img src="./assets/images/star-2.png" alt="Star"> All Projects <img src="./assets/images/star-2.png" alt="Star">
                </h1>

                <!-- Simple Grid Container (no Bootstrap dependency for layout) -->
                <div id="projects-grid" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; margin-top: 50px;">
                    <div style="text-align: center; width: 100%; padding: 50px 0;" id="loading-message">
                        <p>Loading projects...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer (kept exactly the same) -->
        <footer class="footer-area">
            <div class="container" style="margin-top: -120px;">
                <div class="footer-content text-center">
                    <ul class="footer-menu">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="works.html">Works</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                    <p class="copyright" style="margin-top: -20px">
                        &copy; Created with love by <span><a href="https://www.linkedin.com/in/mrbondarenko/" target="_blank">Pavlo Bondarenko</a></span>
                    </p>
                </div>
            </div>
        </footer>
    </main>

    <script src="./assets/js/jquery-3.6.4.js"></script>
    <script src="./assets/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/aos.js"></script>
    <script src="./assets/js/main.js"></script>

    <script>
        if (window.innerWidth >= 769) {
            var script = document.createElement('script');
            script.src = "bg/bg-works/bg_main.js";
            document.head.appendChild(script);
        }
    </script>

    <script>
        async function loadProjects() {
            const projectsGrid = document.getElementById('projects-grid');
            const loadingMessage = document.getElementById('loading-message');

            try {
                const res = await fetch("https://nati-production.up.railway.app/api/project/");
                
                if (!res.ok) {
                    throw new Error(`Failed to load (HTTP ${res.status})`);
                }

                const data = await res.json();
                console.log("Fetched projects:", data);

                if (loadingMessage) loadingMessage.remove();

                if (!Array.isArray(data) || data.length === 0) {
                    projectsGrid.innerHTML = '<div style="text-align: center; width: 100%; padding: 50px 0;"><p>No projects found.</p></div>';
                    return;
                }

                projectsGrid.innerHTML = ''; // Clear any remaining content

                data.forEach(project => {
                    let projectLink = project.link || '#';
                    if (projectLink !== '#' && !projectLink.startsWith('http')) {
                        projectLink = 'https://' + projectLink;
                    }

                    // Create card with full inline styling (no Bootstrap classes needed)
                    const card = document.createElement('div');
                    card.style.width = '350px';
                    card.style.background = '#0f0f0f'; // Assuming dark theme like your original
                    card.style.borderRadius = '20px';
                    card.style.overflow = 'hidden';
                    card.style.boxShadow = '0 10px 30px rgba(0,0,0,0.5)';
                    card.style.position = 'relative';
                    card.style.transition = 'transform 0.3s';

                    card.innerHTML = `
                        <a href="${projectLink}" target="_blank" rel="noopener" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2;"></a>
                        
                        <!-- Background image -->
                        <img src="./assets/images/bg1.png" alt="Background" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.3;">
                        
                        <!-- Project image -->
                        <div style="height: 240px; overflow: hidden; position: relative;">
                            <img src="${project.image || './assets/images/placeholder.jpg'}"
                                 style="width: 100%; height: 100%; object-fit: cover;"
                                 alt="${project.name || 'Project'}"
                                 onerror="this.src='./assets/images/bg1.png';">
                        </div>
                        
                        <!-- Info section -->
                        <div style="padding: 20px; color: white; position: relative; z-index: 1;">
                            <p style="margin: 0; font-size: 14px; opacity: 0.8;">${project.type || 'Project'}</p>
                            <h1 style="margin: 10px 0 0 0; font-size: 24px;">${project.name || 'Untitled Project'}</h1>
                            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                                <a href="${projectLink}" target="_blank" rel="noopener">
                                    <img src="./assets/images/icon.svg" alt="View" style="width: 40px; height: 40px;">
                                </a>
                            </div>
                        </div>
                    `;

                    // Optional hover effect
                    card.onmouseover = () => card.style.transform = 'translateY(-10px)';
                    card.onmouseout = () => card.style.transform = 'translateY(0)';

                    projectsGrid.appendChild(card);
                });

                // AOS still works if you want fade-in (optional)
                if (typeof AOS !== 'undefined') AOS.refresh();

            } catch (err) {
                console.error("Error:", err);
                projectsGrid.innerHTML = `<div style="text-align: center; width: 100%; padding: 50px 0; color: #ff6b6b;">
                    <p>Failed to load projects.<br>Check console or API status.</p>
                </div>`;
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            AOS.init();
            loadProjects();
        });
    </script>
</body>
</html>